var gl,program;function f(e){return new Float32Array(e)}function gl_init(e){function r(e){let r=gl.getExtension(e);return r||console.warn("Can't get extension "+e),r}gl=e.getContext("webgl2"),r("EXT_color_buffer_float"),r("EXT_float_blend"),gl._floatlinear=r("OES_texture_float_linear"),gl.clearColor(0,0,0,1),gl.enable(3042),gl.blendFunc(1,771),gl.enable(2929),gl.w=e.width,gl.h=e.height}function gl_clear(e=!0){gl.clear(16640)}function gl_resize(e,r){gl.viewport(0,0,e,r),gl.w=e,gl.h=r}function gl_viewport(e,r){gl.viewport(0,0,e,r)}function gl_program(e,r){let t=gl.createProgram();function l(e,r,t){var l=gl.createShader(t?35632:35633);if(gl.shaderSource(l,r),gl.compileShader(l),!gl.getShaderParameter(l,35713))return console.warn((t?"fragment":"vertex")+" shader error:\n"+gl.getShaderInfoLog(l)),gl.deleteShader(l),null;gl.attachShader(e,l)}return l(t,e,0),l(t,r,1),gl.linkProgram(t),gl.validateProgram(t),gl.getProgramParameter(t,35714)||console.warn(" gl error:\n"+gl.getProgramInfoLog(t)),gl_use(t),t}function gl_use(e){gl.useProgram(e),program=e}function gl_texture(){return gl.createTexture()}function gl_update_texture(e,r,t=!1,l=!1,g=0,n=0,a=!0){let f=l?34836:6408,o=l?5126:5121;gl.bindTexture(3553,e),r&&(gl.pixelStorei(37443,0),gl.pixelStorei(37440,!0)),0==g?gl.texImage2D(3553,0,f,6408,o,r):gl.texImage2D(3553,0,f,g,n,0,6408,o,r),gl.texParameteri(3553,10240,t||l&&!gl._floatlinear?9728:9729),gl.texParameteri(3553,10241,t||l&&!gl._floatlinear?9728:9729),gl.texParameteri(3553,10242,a?10497:33648),gl.texParameteri(3553,10243,a?10497:33648)}function gl_uniform(e,r=0){return gl.getUniformLocation(program,e,r)}function gl_attribute(e){return gl.getAttribLocation(program,e)}function gl_float(e,r){gl.uniform1f(e,r)}function gl_float2(e,r,t){gl.uniform2f(e,r,t)}function gl_matrix(e,r){gl.uniformMatrix4fv(e,!1,r)}function gl_bind_texture(e,r,t=0){gl.activeTexture(33984+t),gl.bindTexture(3553,r),gl.uniform1i(e,t)}function gl_buffer(){return gl.createBuffer()}function gl_update_buffer(e,r){gl.bindBuffer(34962,e),gl.bufferData(34962,r,35048)}function gl_vao(){const e=gl.createVertexArray();return gl.bindVertexArray(e),e}function gl_bind_vao(e){gl.bindVertexArray(e)}function gl_vaa(e,r,t=4,l=0,g=0){gl.bindBuffer(34962,r),gl.vertexAttribPointer(e,t,5126,0,l,g),gl.enableVertexAttribArray(e)}function gl_framebuffer(e,r,t=!1,l=!1,g=!0){var n=gl_texture();gl_update_texture(n,null,l,g,e,r,!1);var a,f=gl.createFramebuffer();return gl.bindFramebuffer(36160,f),gl.framebufferTexture2D(36160,36064,3553,n,0),t&&(a=gl.createRenderbuffer(),gl.bindRenderbuffer(36161,a),gl.renderbufferStorage(36161,33189,e,r),gl.framebufferRenderbuffer(36160,36096,36161,a)),36053!==gl.checkFramebufferStatus(36160)&&console.warn("Can't create framebuffer"),{f,t:n,d:a,w:e,h:r}}function gl_use_framebuffer(e){let r=null,t=gl.w,l=gl.h;e&&(r=e.f,t=e.w,l=e.h),gl.bindFramebuffer(36160,r),gl_viewport(t,l)}function gl_draw_triangles(e){gl.drawArrays(4,0,e)}